[bluestronica.github.io/WindowsAPI](https://bluestronica.github.io/WindowsAPI)


# Device Context

### Device Context(DC)란?
- Win32에서 출력을 하기 위해서는 Device Context라는 구조체가 필요하다. 해당 구조체는 출력에 필요한 모든 정보를 갖고 있는 데이터 구조체이다. 이 구조체가 왜 필요한지 이해하기 위해서는 화면에 출력되기 까지의 과정을 알고 있어야 한다.
- 윈도우는 기본적으로 세 가지 동적 연결 라이브러리(Dynamic Linked Library)로 구성 되어 있다.
  - Kernel : 메모리를 관리하고 프로그램을 실행한다.
  - User : 유저 인터페이스(UI)와 윈도우를 관리한다.
  - GDI : Graphic Device Interface의 약자로, 화면처리와 그래핑 등 모든 출력 장치를 제어한다.
    - GDI는 모니터, 프린터와 같은 모든 출력 장치를 제어하는 인터페이스이다. 이렇게 출력 장치를 제어하고, 그 곳에 출력하는 것을 GDI 오브젝트라고 한다. 펜, 브러시, 비트맵, 폰트 등 화면에 출력하는 요소들을 뜻한다. 그리고 이런 GDI 오브젝트를 모아놓은 곳이 Device Context이다. 그렇기 때문에 Device Context가 출력에 필요한 모든 정보를 가지는 데이터 구조체라고 하는 것이다. 
- 정리하자면,
  - GDI가 출력 장치를 제어
  - GDI 모듈이 Device Context를 관리한다.
  - 이 Device Context는 펜, 폰트 등 화면에 출력하는 요소인 GDI Object를 갖고 있다.
  - 이를 활용하여 다양한 요소를 화면에 출력한다.

### Device Context가 필요한 이유?
- 선을 그리기 위해서는 다음과 같은 정보들이 필요하다.
  - 선의 시작점 위치
  - 선의 끝점 위치
  - 선의 형태(실선, 점선 등등)
  - 선의 색깔
  - 선의 굻기
  - 선을 그리는 모드(ROP 모드 등)
- 이처럼 화면에 무언가를 출력하기 위해서는 개발자가 신경써야 할 부분이 많기때문에 Device Context를 이용해서 화면에 출력하는 과정을 거친다.
  - Device Context를 사용한 실제 API 코드는 다음과 같다. 
  - `LineTo(hdc, X, Y);` 선이 그어질 위치만 알려주면, 그 외의 정보들은 Device Context에 저장된 정보를 기반으로 자동으로 처리하는 것을 알 수 있다.
- 그 외에도, 윈도우가 실행되는 환경은 여러 개의 프로그램이 동시에 실행되는 멀티 태스킹 스트템이기 때문에, 다른 프로그램과의 상태에도 영향을 받는다. Device Context를 통해서 운영체제가 인지하여 처리하도록 다른 프로그램의 윈도우끼리 출력 결과가 서로 방해하지 않도록 완충하는 역활도 하고 있다.


# 문자열 출력하기





















